Package: libopus0-shlibs
Version: 1.4
Revision: 1
Description: Interactive speech and audio codec
License: BSD
Maintainer: Hanspeter Niederstrasser <nieder@users.sourceforge.net>

BuildDepends: <<
	doxygen,
	fink-package-precedence,
	pkgconfig
<<
CustomMirror: <<
	Primary: https://downloads.xiph.org/releases/opus/
	Secondary: https://archive.mozilla.org/pub/opus/
<<
Source: mirror:custom:opus-%v.tar.gz
Source-Checksum: SHA256(c9b32b4253be5ae63d1ff16eea06b94b5f0f2951b7a02aceef58e3a3ce49c51f)

ConfigureParams: <<
	--disable-static \
	--disable-silent-rules \
	--enable-dependency-tracking
<<
CompileScript: <<
	%{default_script}
	fink-package-precedence --prohibit-bdep=libopus0-dev .	
<<
InfoTest: <<
	TestScript: make check || exit 2
<<
InstallScript: <<
	# fix stoopidly named autogenerated manpage
	mv doc/man/man3/*include_.3 doc/man/man3/opus.3
	make install DESTDIR=%d
	mkdir -p %i/share/man/man3
	cp -p doc/man/man3/* %i/share/man/man3
<<

DocFiles:AUTHORS COPYING README

Shlibs: %p/lib/libopus.0.dylib 10.0.0 %n (>= 1.4-1)

SplitOff: <<
	Package: libopus0-dev
	Description: Opus dev package
	Depends: libopus0-shlibs (>= %v-%r)
	BuildDependsOnly: true
	Files: <<
		include
		lib/libopus.dylib
		lib/libopus.la
		lib/pkgconfig
		share/doc/opus
		share/man
	<<
	DocFiles: AUTHORS COPYING README
<<

Homepage: https://opus-codec.org/
DescDetail: <<
The Opus codec is designed for interactive speech and audio transmission 
over the Internet. It is designed by the IETF Codec Working Group and 
incorporates technology from Skype's SILK codec and Xiph.Org's CELT codec.
<<
